# ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ BonChai Project

## ‡∏™‡∏≤‡∏£‡∏ö‡∏±‡∏ç
1. [‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå](#‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå)
2. [‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå](#‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå)
3. [‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö](#‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö)
4. [‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Database)](#‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•-database)
5. [Backend (PHP)](#backend-php)
6. [Frontend (HTML/CSS/JavaScript)](#frontend-htmlcssjavascript)
7. [API Endpoints](#api-endpoints)
8. [‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö](#‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö)
9. [Security Features](#security-features)
10. [Docker ‡πÅ‡∏•‡∏∞ Infrastructure](#docker-‡πÅ‡∏•‡∏∞-infrastructure)
11. [‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå](#‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå)

---

## ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

BonChai ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏ß‡πá‡∏ö‡πÅ‡∏≠‡∏õ‡∏û‡∏•‡∏¥‡πÄ‡∏Ñ‡∏ä‡∏±‡∏ô‡πÅ‡∏ö‡∏ö Blog ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ ‡πÇ‡∏î‡∏¢‡∏°‡∏µ‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏´‡∏•‡∏±‡∏Å:
- ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
- ‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÅ‡∏•‡∏∞‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô
- ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏ö‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡∏î
- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ

**Tech Stack:**
- Frontend: HTML5, CSS3, Vanilla JavaScript (‡πÑ‡∏°‡πà‡∏°‡∏µ Framework)
- Backend: PHP 8.2 (‡πÑ‡∏°‡πà‡∏°‡∏µ Framework)
- Database: MySQL 8.0
- Infrastructure: Docker + Docker Compose
- Web Server: Apache

---

## ‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

```
Bonchai/
‚îú‚îÄ‚îÄ api/                    # PHP API Endpoints
‚îÇ   ‚îú‚îÄ‚îÄ auth.php           # ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£ authentication (login, signup, logout)
‚îÇ   ‚îú‚îÄ‚îÄ trees.php          # ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ
‚îÇ   ‚îî‚îÄ‚îÄ favorites.php      # ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡∏î
‚îÇ
‚îú‚îÄ‚îÄ assets/                 # ‡πÑ‡∏ü‡∏•‡πå Frontend
‚îÇ   ‚îú‚îÄ‚îÄ css/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ style.css      # Stylesheet ‡∏´‡∏•‡∏±‡∏Å
‚îÇ   ‚îî‚îÄ‚îÄ js/
‚îÇ       ‚îú‚îÄ‚îÄ auth.js         # ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô authentication
‚îÇ       ‚îú‚îÄ‚îÄ main.js         # ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å (home page)
‚îÇ       ‚îú‚îÄ‚îÄ tree-detail.js  # ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ
‚îÇ       ‚îú‚îÄ‚îÄ login.js        # ‡∏´‡∏ô‡πâ‡∏≤ login
‚îÇ       ‚îú‚îÄ‚îÄ signup.js       # ‡∏´‡∏ô‡πâ‡∏≤ signup
‚îÇ       ‚îî‚îÄ‚îÄ favorites.js    # ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡∏î
‚îÇ
‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îî‚îÄ‚îÄ database.php        # Database connection class
‚îÇ
‚îú‚îÄ‚îÄ index.php               # ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏£‡∏Å
‚îú‚îÄ‚îÄ tree.php                # ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ
‚îú‚îÄ‚îÄ login.php               # ‡∏´‡∏ô‡πâ‡∏≤ login
‚îú‚îÄ‚îÄ signup.php              # ‡∏´‡∏ô‡πâ‡∏≤ signup
‚îú‚îÄ‚îÄ favorites.php           # ‡∏´‡∏ô‡πâ‡∏≤‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡∏î
‚îÇ
‚îú‚îÄ‚îÄ Dockerfile              # PHP + Apache container
‚îú‚îÄ‚îÄ docker-compose.yml      # Docker services configuration
‚îú‚îÄ‚îÄ init.sql                # Database schema ‡πÅ‡∏•‡∏∞ sample data
‚îî‚îÄ‚îÄ README.md               # ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô

```

---

## ‡∏™‡∏ñ‡∏≤‡∏õ‡∏±‡∏ï‡∏¢‡∏Å‡∏£‡∏£‡∏°‡∏£‡∏∞‡∏ö‡∏ö

### 1. Client-Server Architecture

```
Browser (Frontend)
    ‚Üì HTTP Requests (AJAX/Fetch)
Apache Web Server
    ‚Üì
PHP Scripts (Backend)
    ‚Üì PDO/MySQLi
MySQL Database
```

### 2. Request Flow

**‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á: ‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å**

1. User ‡∏Å‡∏£‡∏≠‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏° ‚Üí JavaScript (`signup.js`) ‡∏à‡∏±‡∏ö event submit
2. JavaScript ‡∏™‡πà‡∏á POST request ‡πÑ‡∏õ‡∏ó‡∏µ‡πà `api/auth.php?action=signup`
3. PHP (`auth.php`) ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• ‚Üí validate ‚Üí hash password
4. PHP ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ Database ‚Üí INSERT ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
5. PHP ‡∏™‡πà‡∏á JSON response ‡∏Å‡∏•‡∏±‡∏ö
6. JavaScript ‡∏£‡∏±‡∏ö response ‚Üí ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏´‡∏£‡∏∑‡∏≠ redirect

---

## ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• (Database)

### Schema Design

#### 1. Table: `users`
‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ

```sql
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL UNIQUE,      -- ‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥)
    email VARCHAR(100) NOT NULL UNIQUE,         -- ‡∏≠‡∏µ‡πÄ‡∏°‡∏• (‡πÑ‡∏°‡πà‡∏ã‡πâ‡∏≥)
    password VARCHAR(255) NOT NULL,             -- ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô (hashed)
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

**Key Points:**
- `UNIQUE` constraint ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô username/email ‡∏ã‡πâ‡∏≥
- `password` ‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô hash (‡πÑ‡∏°‡πà‡πÄ‡∏Å‡πá‡∏ö plain text)
- `AUTO_INCREMENT` ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö id

#### 2. Table: `trees`
‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ

```sql
CREATE TABLE trees (
    id INT AUTO_INCREMENT PRIMARY KEY,
    name VARCHAR(100) NOT NULL,                -- ‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ
    scientific_name VARCHAR(150) NOT NULL,      -- ‡∏ä‡∏∑‡πà‡∏≠‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏®‡∏≤‡∏™‡∏ï‡∏£‡πå
    description TEXT NOT NULL,                  -- ‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢
    care TEXT NOT NULL,                         -- ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏î‡∏π‡πÅ‡∏•
    image_url VARCHAR(255) NOT NULL,            -- URL ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

#### 3. Table: `favorites`
‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå user-tree (Many-to-Many)

```sql
CREATE TABLE favorites (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,                       -- FK to users
    tree_id INT NOT NULL,                       -- FK to trees
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE KEY unique_favorite (user_id, tree_id),  -- ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô‡∏ã‡πâ‡∏≥
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (tree_id) REFERENCES trees(id) ON DELETE CASCADE
);
```

**Key Points:**
- `UNIQUE (user_id, tree_id)` = ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ 1 ‡∏Ñ‡∏ô ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ 1 ‡∏ï‡πâ‡∏ô‡πÑ‡∏î‡πâ‡πÅ‡∏Ñ‡πà‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
- `ON DELETE CASCADE` = ‡∏ñ‡πâ‡∏≤‡∏•‡∏ö user/tree ‡∏à‡∏∞‡∏•‡∏ö favorites ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- Many-to-Many relationship: User 1 ‡∏Ñ‡∏ô ‚Üí ‡∏´‡∏•‡∏≤‡∏¢ Trees, Tree 1 ‡∏ï‡πâ‡∏ô ‚Üí ‡∏´‡∏•‡∏≤‡∏¢ Users

### Database Connection

**File: `config/database.php`**

```php
class Database {
    private $host = 'db';              // ‡∏ä‡∏∑‡πà‡∏≠ service ‡πÉ‡∏ô docker-compose
    private $db_name = 'bonchai';
    private $username = 'bonchai_user';
    private $password = 'bonchai_password';
    
    public function getConnection() {
        // ‡πÉ‡∏ä‡πâ PDO (PHP Data Objects)
        $this->conn = new PDO(
            "mysql:host={$this->host};dbname={$this->db_name};charset=utf8mb4",
            $this->username,
            $this->password,
            [
                PDO::ATTR_ERRMODE => PDO::ERRMODE_EXCEPTION,  // Throw exceptions on error
                PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC,  // Return associative arrays
                PDO::ATTR_EMULATE_PREPARES => false  // Use real prepared statements
            ]
        );
        return $this->conn;
    }
}
```

**‡∏ó‡∏≥‡πÑ‡∏°‡πÉ‡∏ä‡πâ PDO?**
- Prepared statements ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô SQL Injection
- Error handling ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤ MySQLi
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢ database types

---

## Backend (PHP)

### 1. Authentication System

**File: `api/auth.php`**

#### Session Management
```php
session_start();  // ‡πÄ‡∏£‡∏¥‡πà‡∏° session
$_SESSION['user_id'] = $user['id'];  // ‡πÄ‡∏Å‡πá‡∏ö user_id
```

**Session ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?**
- ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏ô server (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà cookie)
- ‡πÉ‡∏ä‡πâ session ID (cookie) ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á‡∏Å‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
- ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Å‡∏ß‡πà‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô cookie

#### Password Hashing
```php
// Hash password ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Å‡πá‡∏ö
$hashed_password = password_hash($password, PASSWORD_DEFAULT);

// ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö password
if (password_verify($password, $user['password'])) {
    // Login ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à
}
```

**‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á hash?**
- `password_hash()` ‡πÉ‡∏ä‡πâ bcrypt algorithm
- ‡πÅ‡∏°‡πâ database ‡∏ñ‡∏π‡∏Å hack ‡∏Å‡πá‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ password ‡∏à‡∏£‡∏¥‡∏á
- `PASSWORD_DEFAULT` = ‡πÉ‡∏ä‡πâ algorithm ‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÉ‡∏ô PHP ‡πÄ‡∏ß‡∏≠‡∏£‡πå‡∏ä‡∏±‡∏ô‡∏ô‡∏±‡πâ‡∏ô

#### API Response Format
```php
// Success
echo json_encode([
    'success' => true,
    'message' => '‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',
    'user' => ['id' => 1, 'username' => 'john']
]);

// Error
echo json_encode([
    'success' => false,
    'message' => '‡∏ä‡∏∑‡πà‡∏≠‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏´‡∏£‡∏∑‡∏≠‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏ô‡∏µ‡πâ‡∏ñ‡∏π‡∏Å‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß'
]);
```

### 2. Prepared Statements (‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô SQL Injection)

**‚ùå ‡πÑ‡∏°‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢:**
```php
$query = "SELECT * FROM users WHERE username = '$username'";
// ‡∏ñ‡πâ‡∏≤ $username = "admin' OR '1'='1" ‡∏à‡∏∞‡πÑ‡∏î‡πâ SQL:
// SELECT * FROM users WHERE username = 'admin' OR '1'='1'
// ‚Üí Login ‡πÑ‡∏î‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô!
```

**‚úÖ ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢:**
```php
$stmt = $db->prepare("SELECT * FROM users WHERE username = ?");
$stmt->execute([$username]);
// PHP ‡∏à‡∏∞ escape ‡πÅ‡∏•‡∏∞ validate ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
```

**‡∏ó‡∏≥‡πÑ‡∏°‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢?**
- `?` = placeholder, PHP ‡∏à‡∏∞ escape ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ
- ‡πÅ‡∏°‡πâ‡πÉ‡∏™‡πà SQL code ‡∏Å‡πá‡∏à‡∏∞‡∏ñ‡∏π‡∏Å treat ‡πÄ‡∏õ‡πá‡∏ô string ‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤

### 3. Error Handling

```php
try {
    $database = new Database();
    $db = $database->getConnection();
} catch (Exception $e) {
    http_response_code(500);
    echo json_encode(['success' => false, 'message' => 'Database error']);
    exit;
}
```

**Best Practices:**
- ‡πÉ‡∏ä‡πâ try-catch ‡∏à‡∏±‡∏ö exceptions
- ‡∏™‡πà‡∏á HTTP status code ‡∏ó‡∏µ‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á (500 = server error)
- ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á error message ‡∏ó‡∏µ‡πà‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÉ‡∏´‡πâ user (security)

---

## Frontend (HTML/CSS/JavaScript)

### 1. HTML Structure

**File: `index.php`**

```html
<header class="header">
    <h1 class="logo">BonChai</h1>
    <nav class="nav">
        <a href="index.php">‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</a>
        <a href="favorites.php">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡∏î</a>
    </nav>
</header>

<main class="main">
    <section class="hero">...</section>
    <section class="content-section">
        <div id="trees-grid"></div>  <!-- JavaScript ‡∏à‡∏∞ inject HTML ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ -->
    </section>
</main>
```

### 2. CSS Architecture

**File: `assets/css/style.css`**

#### CSS Variables (Custom Properties)
```css
:root {
    --primary-green: #2d5016;
    --bg-gray: #f5f5f5;
    --text-dark: #333333;
}
```

**‡∏õ‡∏£‡∏∞‡πÇ‡∏¢‡∏ä‡∏ô‡πå:**
- ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏µ‡∏ó‡∏±‡πâ‡∏á‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
- ‡∏á‡πà‡∏≤‡∏¢‡∏ï‡πà‡∏≠‡∏Å‡∏≤‡∏£ maintain

#### Responsive Design
```css
@media (max-width: 768px) {
    .trees-grid {
        grid-template-columns: 1fr;  /* 1 ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå‡∏ö‡∏ô‡∏°‡∏∑‡∏≠‡∏ñ‡∏∑‡∏≠ */
    }
}
```

**Mobile-First Approach:**
- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å mobile ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡∏Ç‡∏¢‡∏≤‡∏¢‡πÄ‡∏õ‡πá‡∏ô desktop
- ‡πÉ‡∏ä‡πâ `min-width` ‡∏´‡∏£‡∏∑‡∏≠ `max-width` media queries

### 3. JavaScript (Vanilla JS - ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ Framework)

#### Fetch API (Modern AJAX)

**File: `assets/js/signup.js`**

```javascript
const response = await fetch('api/auth.php?action=signup', {
    method: 'POST',
    headers: {
        'Content-Type': 'application/json'
    },
    body: JSON.stringify({ username, email, password })
});

const data = await response.json();
```

**‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢:**
- `fetch()` = Modern replacement ‡∏Ç‡∏≠‡∏á XMLHttpRequest
- `async/await` = ‡∏ó‡∏≥‡πÉ‡∏´‡πâ asynchronous code ‡∏≠‡πà‡∏≤‡∏ô‡∏á‡πà‡∏≤‡∏¢
- `JSON.stringify()` = ‡πÅ‡∏õ‡∏•‡∏á object ‚Üí JSON string
- `response.json()` = ‡πÅ‡∏õ‡∏•‡∏á JSON string ‚Üí object

#### Event Handling

```javascript
document.addEventListener('DOMContentLoaded', () => {
    // Code ‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏£‡∏±‡∏ô‡πÄ‡∏°‡∏∑‡πà‡∏≠ DOM ‡πÇ‡∏´‡∏•‡∏î‡πÄ‡∏™‡∏£‡πá‡∏à
    const form = document.getElementById('signup-form');
    form.addEventListener('submit', async (e) => {
        e.preventDefault();  // ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô form submit ‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤
        // ‡∏ó‡∏≥ AJAX request ‡πÅ‡∏ó‡∏ô
    });
});
```

**‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á `e.preventDefault()`?**
- ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô browser submit form ‡∏ò‡∏£‡∏£‡∏°‡∏î‡∏≤ (‡∏à‡∏∞ reload ‡∏´‡∏ô‡πâ‡∏≤)
- ‡πÉ‡∏ä‡πâ AJAX ‡πÅ‡∏ó‡∏ô ‚Üí ‡πÑ‡∏°‡πà reload ‡∏´‡∏ô‡πâ‡∏≤ ‚Üí UX ‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤

#### DOM Manipulation

```javascript
// Get element
const errorDiv = document.getElementById('error-message');

// Set content
errorDiv.textContent = '‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡πâ‡∏≠‡∏ú‡∏¥‡∏î‡∏û‡∏•‡∏≤‡∏î';

// Create element
const card = document.createElement('div');
card.className = 'tree-card';
card.innerHTML = `<h3>${tree.name}</h3>`;

// Append to DOM
document.getElementById('trees-grid').appendChild(card);
```

---

## API Endpoints

### Authentication API (`api/auth.php`)

#### 1. Sign Up
```
POST /api/auth.php?action=signup
Body: {
    "username": "john",
    "email": "john@example.com",
    "password": "password123",
    "confirm_password": "password123"
}
Response: {
    "success": true,
    "message": "‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",
    "user": {"id": 1, "username": "john"}
}
```

#### 2. Login
```
POST /api/auth.php?action=login
Body: {
    "username": "john",
    "password": "password123"
}
Response: {
    "success": true,
    "message": "‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à",
    "user": {"id": 1, "username": "john"}
}
```

#### 3. Check Auth Status
```
GET /api/auth.php?action=check
Response: {
    "logged_in": true,
    "user": {"id": 1, "username": "john"}
}
```

#### 4. Logout
```
POST /api/auth.php?action=logout
Response: {
    "success": true,
    "message": "‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à"
}
```

### Trees API (`api/trees.php`)

#### 1. List All Trees
```
GET /api/trees.php?action=list
Response: {
    "success": true,
    "trees": [
        {
            "id": 1,
            "name": "‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ1",
            "scientific_name": "Arbor Exemplaris",
            "description": "...",
            "image_url": "https://..."
        }
    ]
}
```

#### 2. Get Tree Detail
```
GET /api/trees.php?action=get&id=1
Response: {
    "success": true,
    "tree": {
        "id": 1,
        "name": "‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ1",
        "scientific_name": "Arbor Exemplaris",
        "description": "...",
        "care": "...",
        "image_url": "https://..."
    }
}
```

### Favorites API (`api/favorites.php`)

**Note: ‡∏ï‡πâ‡∏≠‡∏á login ‡∏Å‡πà‡∏≠‡∏ô (‡∏°‡∏µ session)**

#### 1. Toggle Favorite
```
POST /api/favorites.php?action=toggle
Body: {
    "tree_id": 1
}
Response: {
    "success": true,
    "is_favorite": true,
    "message": "‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡∏î‡πÅ‡∏•‡πâ‡∏ß"
}
```

#### 2. Check if Favorite
```
GET /api/favorites.php?action=check&tree_id=1
Response: {
    "success": true,
    "is_favorite": true
}
```

#### 3. List User's Favorites
```
GET /api/favorites.php?action=list
Response: {
    "success": true,
    "favorites": [
        {
            "id": 1,
            "name": "‡∏ï‡πâ‡∏ô‡πÑ‡∏°‡πâ1",
            "scientific_name": "Arbor Exemplaris",
            "description": "...",
            "image_url": "https://..."
        }
    ]
}
```

---

## ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö

### Flow: ‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å

1. **User ‡∏Å‡∏£‡∏≠‡∏Å‡∏ü‡∏≠‡∏£‡πå‡∏°** (`signup.php`)
   - Username, Email, Password, Confirm Password

2. **JavaScript Validate** (`signup.js`)
   ```javascript
   if (password !== confirmPassword) {
       errorMessage.textContent = '‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ô';
       return;
   }
   ```

3. **‡∏™‡πà‡∏á AJAX Request**
   ```javascript
   fetch('api/auth.php?action=signup', {
       method: 'POST',
       body: JSON.stringify({ username, email, password, confirm_password })
   })
   ```

4. **PHP ‡∏£‡∏±‡∏ö Request** (`api/auth.php`)
   ```php
   $data = json_decode(file_get_contents('php://input'), true);
   ```

5. **Validate & Hash Password**
   ```php
   $hashed_password = password_hash($password, PASSWORD_DEFAULT);
   ```

6. **Insert to Database**
   ```php
   $stmt = $db->prepare("INSERT INTO users (username, email, password) VALUES (?, ?, ?)");
   $stmt->execute([$username, $email, $hashed_password]);
   ```

7. **Create Session**
   ```php
   $_SESSION['user_id'] = $db->lastInsertId();
   $_SESSION['username'] = $username;
   ```

8. **Return JSON Response**
   ```php
   echo json_encode(['success' => true, 'message' => '‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à']);
   ```

9. **JavaScript Handle Response**
   ```javascript
   if (data.success) {
       window.location.href = 'index.php';  // Redirect
   }
   ```

### Flow: ‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÇ‡∏õ‡∏£‡∏î

1. **User ‡∏Ñ‡∏•‡∏¥‡∏Å Star Icon** (`index.php` ‡∏´‡∏£‡∏∑‡∏≠ `tree.php`)

2. **JavaScript ‡∏™‡πà‡∏á Request**
   ```javascript
   fetch('api/favorites.php?action=toggle', {
       method: 'POST',
       body: JSON.stringify({ tree_id: treeId })
   })
   ```

3. **PHP ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Session**
   ```php
   if (!isset($_SESSION['user_id'])) {
       http_response_code(401);
       echo json_encode(['success' => false, 'message' => '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö']);
       exit;
   }
   ```

4. **Check if Already Favorited**
   ```php
   $stmt = $db->prepare("SELECT id FROM favorites WHERE user_id = ? AND tree_id = ?");
   $stmt->execute([$user_id, $tree_id]);
   ```

5. **Toggle (Add or Remove)**
   ```php
   if ($existing) {
       // Remove
       $stmt = $db->prepare("DELETE FROM favorites WHERE user_id = ? AND tree_id = ?");
   } else {
       // Add
       $stmt = $db->prepare("INSERT INTO favorites (user_id, tree_id) VALUES (?, ?)");
   }
   ```

6. **Update UI**
   ```javascript
   if (data.is_favorite) {
       starIcon.classList.add('active');  // ‡∏™‡∏µ‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏á
   } else {
       starIcon.classList.remove('active');  // ‡∏™‡∏µ‡πÄ‡∏ó‡∏≤
   }
   ```

---

## Security Features

### 1. SQL Injection Prevention
- ‡πÉ‡∏ä‡πâ Prepared Statements ‡∏ó‡∏∏‡∏Å query
- ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ string concatenation ‡πÉ‡∏ô SQL

### 2. Password Security
- Hash ‡∏î‡πâ‡∏ß‡∏¢ `password_hash()` (bcrypt)
- ‡πÑ‡∏°‡πà‡πÄ‡∏Å‡πá‡∏ö plain text password

### 3. Session Security
- Session ‡πÄ‡∏Å‡πá‡∏ö‡∏ö‡∏ô server (‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà cookie)
- ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö session ‡∏Å‡πà‡∏≠‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á protected resources

### 4. Input Validation
- Validate ‡∏ó‡∏±‡πâ‡∏á‡∏ù‡∏±‡πà‡∏á client (JavaScript) ‡πÅ‡∏•‡∏∞ server (PHP)
- Sanitize input ‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏ä‡πâ

### 5. Error Handling
- ‡πÑ‡∏°‡πà‡πÅ‡∏™‡∏î‡∏á error message ‡∏ó‡∏µ‡πà‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÉ‡∏´‡πâ user
- Log errors ‡πÑ‡∏ß‡πâ‡∏ó‡∏µ‡πà server

### 6. CORS (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
- ‡∏ñ‡πâ‡∏≤ API ‡∏ñ‡∏π‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏à‡∏≤‡∏Å domain ‡∏≠‡∏∑‡πà‡∏ô ‡∏ï‡πâ‡∏≠‡∏á set CORS headers

---

## Docker ‡πÅ‡∏•‡∏∞ Infrastructure

### Docker Compose Services

**File: `docker-compose.yml`**

```yaml
services:
  web:          # PHP + Apache
    build: .
    ports:
      - "8080:80"  # Map port 8080 (host) ‚Üí 80 (container)
    volumes:
      - ./:/var/www/html  # Mount project files

  db:           # MySQL
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: rootpassword
      MYSQL_DATABASE: bonchai
    volumes:
      - ./init.sql:/docker-entrypoint-initdb.d/init.sql  # Auto-run on first start

  phpmyadmin:   # Database management tool
    image: phpmyadmin/phpmyadmin
    ports:
      - "8081:80"
```

### Dockerfile

**File: `Dockerfile`**

```dockerfile
FROM php:8.2-apache

# Enable Apache mod_rewrite (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö URL rewriting)
RUN a2enmod rewrite

# Install MySQL PDO extension
RUN docker-php-ext-install pdo pdo_mysql

# Set Apache document root
ENV APACHE_DOCUMENT_ROOT /var/www/html
RUN sed -ri -e 's!/var/www/html!${APACHE_DOCUMENT_ROOT}!g' /etc/apache2/sites-available/*.conf
```

**‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢:**
- `FROM php:8.2-apache` = ‡πÉ‡∏ä‡πâ base image ‡∏ó‡∏µ‡πà‡∏°‡∏µ PHP 8.2 + Apache
- `docker-php-ext-install` = ‡∏ï‡∏¥‡∏î‡∏ï‡∏±‡πâ‡∏á PHP extensions
- `ENV` = ‡∏ï‡∏±‡πâ‡∏á environment variable
- `RUN sed` = ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç config file

### Network Communication

```
Browser (localhost:8080)
    ‚Üì
Docker Host
    ‚Üì
Container: web (port 80)
    ‚Üì
Container: db (port 3306)  ‚Üê ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡∏∑‡πà‡∏≠ service "db"
```

**‡∏ó‡∏≥‡πÑ‡∏°‡πÉ‡∏ä‡πâ‡∏ä‡∏∑‡πà‡∏≠ "db"?**
- Docker Compose ‡∏™‡∏£‡πâ‡∏≤‡∏á internal network
- Services ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡∏Å‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏ä‡∏∑‡πà‡∏≠ service
- `$host = 'db'` ‡πÉ‡∏ô `database.php` = ‡∏ä‡∏∑‡πà‡∏≠ service

---

## ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Ç‡∏¢‡∏≤‡∏¢‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå

### 1. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà: Comments

#### Step 1: ‡∏™‡∏£‡πâ‡∏≤‡∏á Database Table
```sql
CREATE TABLE comments (
    id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    tree_id INT NOT NULL,
    comment TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(id) ON DELETE CASCADE,
    FOREIGN KEY (tree_id) REFERENCES trees(id) ON DELETE CASCADE
);
```

#### Step 2: ‡∏™‡∏£‡πâ‡∏≤‡∏á API Endpoint
**File: `api/comments.php`**
```php
<?php
session_start();
require_once __DIR__ . '/../config/database.php';

header('Content-Type: application/json');

if (!isset($_SESSION['user_id'])) {
    http_response_code(401);
    echo json_encode(['success' => false, 'message' => '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö']);
    exit;
}

try {
    $database = new Database();
    $db = $database->getConnection();
} catch (Exception $e) {
    http_response_code(500);
    echo json_encode(['success' => false, 'message' => 'Database error']);
    exit;
}

$method = $_SERVER['REQUEST_METHOD'];
$action = $_GET['action'] ?? '';
$user_id = $_SESSION['user_id'];

switch ($action) {
    case 'add':
        if ($method === 'POST') {
            $data = json_decode(file_get_contents('php://input'), true);
            $tree_id = intval($data['tree_id'] ?? 0);
            $comment = trim($data['comment'] ?? '');
            
            if (empty($comment)) {
                echo json_encode(['success' => false, 'message' => '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô']);
                exit;
            }
            
            $stmt = $db->prepare("INSERT INTO comments (user_id, tree_id, comment) VALUES (?, ?, ?)");
            if ($stmt->execute([$user_id, $tree_id, $comment])) {
                echo json_encode(['success' => true, 'message' => '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à']);
            }
        }
        break;
        
    case 'list':
        if ($method === 'GET') {
            $tree_id = intval($_GET['tree_id'] ?? 0);
            $stmt = $db->prepare("
                SELECT c.*, u.username 
                FROM comments c
                JOIN users u ON c.user_id = u.id
                WHERE c.tree_id = ?
                ORDER BY c.created_at DESC
            ");
            $stmt->execute([$tree_id]);
            $comments = $stmt->fetchAll();
            echo json_encode(['success' => true, 'comments' => $comments]);
        }
        break;
}
```

#### Step 3: ‡πÄ‡∏û‡∏¥‡πà‡∏° UI
**File: `tree.php`** (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏™‡πà‡∏ß‡∏ô‡πÅ‡∏™‡∏î‡∏á comments)
```html
<div id="comments-section">
    <h3>‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô</h3>
    <div id="comments-list"></div>
    <form id="comment-form">
        <textarea id="comment-text" placeholder="‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô..."></textarea>
        <button type="submit">‡∏™‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ñ‡∏¥‡∏î‡πÄ‡∏´‡πá‡∏ô</button>
    </form>
</div>
```

#### Step 4: ‡πÄ‡∏û‡∏¥‡πà‡∏° JavaScript
**File: `assets/js/tree-detail.js`** (‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô)
```javascript
async function loadComments() {
    const response = await fetch(`api/comments.php?action=list&tree_id=${treeId}`);
    const data = await response.json();
    if (data.success) {
        displayComments(data.comments);
    }
}

async function addComment(commentText) {
    const response = await fetch('api/comments.php?action=add', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ tree_id: treeId, comment: commentText })
    });
    const data = await response.json();
    if (data.success) {
        loadComments();  // Reload comments
    }
}
```

### 2. ‡πÄ‡∏û‡∏¥‡πà‡∏° Pagination

**Backend:**
```php
$page = intval($_GET['page'] ?? 1);
$limit = 10;
$offset = ($page - 1) * $limit;

$stmt = $db->prepare("SELECT * FROM trees LIMIT ? OFFSET ?");
$stmt->execute([$limit, $offset]);
```

**Frontend:**
```javascript
let currentPage = 1;

function loadTrees(page) {
    fetch(`api/trees.php?action=list&page=${page}`)
        .then(response => response.json())
        .then(data => {
            displayTrees(data.trees);
            updatePagination(data.totalPages, page);
        });
}
```

### 3. ‡πÄ‡∏û‡∏¥‡πà‡∏° Image Upload

**‡πÉ‡∏ä‡πâ FormData:**
```javascript
const formData = new FormData();
formData.append('image', fileInput.files[0]);
formData.append('tree_id', treeId);

fetch('api/upload.php', {
    method: 'POST',
    body: formData  // ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á set Content-Type, browser ‡∏à‡∏∞ set ‡πÉ‡∏´‡πâ
});
```

**PHP:**
```php
$uploadDir = __DIR__ . '/../uploads/';
$fileName = uniqid() . '_' . $_FILES['image']['name'];
move_uploaded_file($_FILES['image']['tmp_name'], $uploadDir . $fileName);
```

---

## Best Practices ‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ

### 1. Separation of Concerns
- **Config** ‚Üí `config/database.php`
- **API Logic** ‚Üí `api/*.php`
- **Presentation** ‚Üí `*.php` (HTML)
- **Styling** ‚Üí `assets/css/`
- **Behavior** ‚Üí `assets/js/`

### 2. DRY (Don't Repeat Yourself)
- Database connection ‡πÉ‡∏ä‡πâ class ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
- Error handling pattern ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô‡∏ó‡∏∏‡∏Å API

### 3. Security First
- Prepared statements ‡∏ó‡∏∏‡∏Å query
- Password hashing
- Input validation

### 4. Error Handling
- Try-catch ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö database operations
- Proper HTTP status codes
- User-friendly error messages

### 5. Code Organization
- ‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏¢‡∏Å‡∏ï‡∏≤‡∏°‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà
- Naming convention ‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠
- Comments ‡∏ó‡∏µ‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô

---

## ‡∏Ñ‡∏≥‡∏ñ‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏û‡∏ö‡∏ö‡πà‡∏≠‡∏¢ (FAQ)

### Q: ‡∏ó‡∏≥‡πÑ‡∏°‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ Framework?
**A:** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô PHP/JavaScript ‡∏Å‡πà‡∏≠‡∏ô ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÑ‡∏õ‡πÉ‡∏ä‡πâ Framework ‡∏†‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á

### Q: ‡∏ó‡∏≥‡πÑ‡∏°‡πÉ‡∏ä‡πâ Vanilla JavaScript ‡πÅ‡∏ó‡∏ô jQuery/React?
**A:** ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à DOM manipulation ‡πÅ‡∏•‡∏∞ Fetch API ‡∏Å‡πà‡∏≠‡∏ô

### Q: Session vs Cookie ‡∏ï‡πà‡∏≤‡∏á‡∏Å‡∏±‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á?
**A:** 
- **Session**: ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏ô server, ‡πÉ‡∏ä‡πâ session ID (cookie) ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡πÇ‡∏¢‡∏á
- **Cookie**: ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏ô client (browser)

### Q: ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á hash password?
**A:** ‡∏ñ‡πâ‡∏≤ database ‡∏ñ‡∏π‡∏Å hack, hacker ‡∏à‡∏∞‡πÑ‡∏°‡πà‡∏£‡∏π‡πâ password ‡∏à‡∏£‡∏¥‡∏á (‡∏£‡∏π‡πâ‡πÅ‡∏Ñ‡πà hash)

### Q: Prepared Statements ‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£?
**A:** ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô SQL ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢ ‡πÇ‡∏î‡∏¢‡πÅ‡∏¢‡∏Å SQL code ‡∏Å‡∏±‡∏ö data ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏±‡∏ô

---

## ‡∏ó‡∏£‡∏±‡∏û‡∏¢‡∏≤‡∏Å‡∏£‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°

### PHP
- [PHP Manual](https://www.php.net/manual/en/)
- [PDO Documentation](https://www.php.net/manual/en/book.pdo.php)

### JavaScript
- [MDN Web Docs](https://developer.mozilla.org/)
- [Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API)

### MySQL
- [MySQL Documentation](https://dev.mysql.com/doc/)
- [SQL Tutorial](https://www.w3schools.com/sql/)

### Docker
- [Docker Documentation](https://docs.docker.com/)
- [Docker Compose](https://docs.docker.com/compose/)

---

## ‡∏™‡∏£‡∏∏‡∏õ

‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå BonChai ‡∏ô‡∏µ‡πâ‡πÄ‡∏õ‡πá‡∏ô‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ó‡∏µ‡πà‡∏î‡∏µ‡∏Ç‡∏≠‡∏á:
- ‚úÖ Full-stack web application
- ‚úÖ RESTful API design
- ‚úÖ Security best practices
- ‚úÖ Modern JavaScript (async/await, Fetch API)
- ‚úÖ Docker containerization
- ‚úÖ Database design (normalization, relationships)

**Next Steps:**
1. ‡∏•‡∏≠‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà (comments, ratings, etc.)
2. ‡πÄ‡∏û‡∏¥‡πà‡∏° unit tests
3. ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ Framework (Laravel, React, etc.)
4. ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ deployment (AWS, Heroku, etc.)

**Happy Coding! üöÄ**

